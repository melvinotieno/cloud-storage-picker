<!doctype html>
<html lang="en-US">
  <head>
    <title>Cloud Storage Picker</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <h1>Cloud Storage Picker</h1>

    <div class="container">
      <div class="button-group">
        <button id="dropbox">Dropbox</button>
        <button id="google-drive">Google Drive</button>
      </div>

      <div class="divider"></div>

      <div class="result">Please use a picker to select files.</div>
    </div>

    <script type="module">
      import { createPicker } from "./dist/index.js";
      import { dropboxProvider } from "./dist/providers/dropbox.js";
      import { googleDriveProvider } from "./dist/providers/google-drive.js";

      const resultDiv = document.querySelector(".result");

      const updateResult = (files) => {
        resultDiv.textContent = JSON.stringify(files, null, 2);
      };

      const onDropboxChooser = async () => {
        const picker = createPicker({
          provider: dropboxProvider({
            appKey: "YOUR_DROPBOX_APP_KEY",
          }),
        });

        const files = await picker.open();

        updateResult(files);
      };

      const onGoogleDrivePicker = async () => {
        const picker = createPicker({
          provider: googleDriveProvider({
            clientId: "YOUR_GOOGLE_CLIENT_ID",
            apiKey: "YOUR_GOOGLE_API_KEY",
          }),
        });

        const files = await picker.open();

        updateResult(files);
      };

      document
        .querySelector("#dropbox")
        .addEventListener("click", onDropboxChooser);

      document
        .querySelector("#google-drive")
        .addEventListener("click", onGoogleDrivePicker);
    </script>
  </body>
</html>
